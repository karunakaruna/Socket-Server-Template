<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Œ®-WTMN Ordinal</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background-color: #1a1b26;
            color: #a9b1d6;
            overflow: hidden;
            position: relative;
            width: 100vw;
            height: 100vh;
        }

        canvas {
            position: absolute;
            top: 0;
            left: 0;
        }

        #shader-canvas {
            z-index: 1;
        }

        #particle-canvas {
            z-index: 2;
        }

        .content-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 3;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            pointer-events: none;
            user-select: none;
        }

        .psi-header {
            font-size: 120px;
            font-weight: bold;
            color: #7aa2f7;
            margin: 0 0 10px 0;
            text-shadow: 0 0 20px rgba(122, 162, 247, 0.5);
            animation: glow 2s ease-in-out infinite alternate;
            cursor: pointer;
            pointer-events: auto;
            transition: font-family 0.3s ease;
        }

        .title {
            font-size: 24px;
            font-weight: 600;
            color: #a9b1d6;
            margin: 0 0 20px 0;
            letter-spacing: 2px;
        }

        .title span {
            display: inline-block;
            transition: font-family 0.5s ease;
        }

        .server-data {
            font-size: 12px;
            color: rgba(169, 177, 214, 0.6);
            text-align: center;
            font-family: 'Courier New', monospace;
            line-height: 1.4;
            max-width: 600px;
            margin: 0;
        }

        .server-data span {
            margin: 0 8px;
        }

        #poetry {
            font-size: 24px;
            color: rgba(169, 177, 214, 0.8);
            text-align: center;
            margin: 20px 0;
            max-width: 80%;
            text-shadow: 0 0 10px rgba(169, 177, 214, 0.3);
        }

        #context {
            font-size: 18px;
            color: rgba(169, 177, 214, 0.7);
            text-align: center;
            margin: 0;
            max-width: 80%;
            text-shadow: 0 0 10px rgba(169, 177, 214, 0.3);
        }

        @keyframes glow {
            from {
                text-shadow: 0 0 20px rgba(122, 162, 247, 0.5);
            }
            to {
                text-shadow: 0 0 30px rgba(122, 162, 247, 0.8);
            }
        }

        .nav-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: rgba(26, 27, 38, 0.8);
            border: 1px solid #7aa2f7;
            color: #7aa2f7;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .nav-toggle:hover {
            background: rgba(122, 162, 247, 0.2);
        }

        .nav-menu {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 999;
            background: rgba(26, 27, 38, 0.95);
            border: 1px solid #7aa2f7;
            border-radius: 8px;
            padding: 20px;
            width: 300px;
            transform: translateX(350px);
            transition: transform 0.3s ease;
            backdrop-filter: blur(10px);
            color: #a9b1d6;
            font-family: 'Courier New', monospace;
            max-height: calc(100vh - 40px);
            overflow-y: auto;
        }

        .nav-menu.active {
            transform: translateX(0);
        }

        .nav-menu h3 {
            color: #7aa2f7;
            margin: 0 0 15px 0;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
            border-bottom: 1px solid rgba(122, 162, 247, 0.3);
            padding-bottom: 5px;
        }

        .folder-structure {
            margin-bottom: 20px;
        }

        .folder-structure ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .folder-structure li {
            padding: 3px 0 3px 20px;
            position: relative;
            font-size: 13px;
        }

        .folder-structure .folder {
            color: #e0af68;
        }

        .folder-structure .file {
            color: #9ece6a;
        }

        .folder-structure .folder::before {
            content: "üìÅ";
            position: absolute;
            left: 0;
        }

        .folder-structure .file::before {
            content: "üìÑ";
            position: absolute;
            left: 0;
        }

        .nav-menu a {
            color: inherit;
            text-decoration: none;
            transition: color 0.2s ease;
        }

        .nav-menu a:hover {
            color: #7aa2f7;
        }

        .nav-menu .routes {
            margin-bottom: 20px;
        }

        .nav-menu .route-item {
            padding: 5px 10px;
            margin: 2px 0;
            border-radius: 4px;
            transition: background 0.2s ease;
        }

        .nav-menu .route-item:hover {
            background: rgba(122, 162, 247, 0.1);
        }

        .nav-menu .description {
            font-size: 11px;
            color: rgba(169, 177, 214, 0.6);
            margin-top: 2px;
        }

        /* Custom scrollbar */
        .nav-menu::-webkit-scrollbar {
            width: 6px;
        }

        .nav-menu::-webkit-scrollbar-track {
            background: rgba(26, 27, 38, 0.5);
        }

        .nav-menu::-webkit-scrollbar-thumb {
            background: rgba(122, 162, 247, 0.3);
            border-radius: 3px;
        }

        .nav-menu::-webkit-scrollbar-thumb:hover {
            background: rgba(122, 162, 247, 0.5);
        }
    </style>
</head>
<body>
    <canvas id="shader-canvas"></canvas>
    <canvas id="particle-canvas"></canvas>
    <div class="content-overlay">
        <div class="psi-header">Œ®</div>
        <div class="title" id="dynamic-title">WORLDTREE</div>
        <div class="server-data">
            <span>node: psi-wtmn-01</span>‚Ä¢
            <span>uptime: 127.4h</span>‚Ä¢
            <span>peers: 47</span>‚Ä¢
            <span>latency: 23ms</span>‚Ä¢
            <span>throughput: 1.2GB/s</span>‚Ä¢
            <span>load: 0.42</span>‚Ä¢
            <span>memory: 84.2%</span>‚Ä¢
            <span>temp: 42.3¬∞C</span>
        </div>
        <div id="poetry">Beyond œâ, a trembling bridge; beyond that, echoes of greater infinities.</div>
        <div id="context">An infinite expanse folds upon itself, spiraling into recursive echoes of boundless order. Each step forward unveils new depths, where the horizon collapses into a shimmering lattice of structure and dissolution.</div>
    </div>

    <button class="nav-toggle">‚â° Menu</button>
    <div class="nav-menu">
        <h3>Navigation</h3>
        <div class="routes">
            <div class="route-item">
                <a href="/">üè† Home</a>
                <div class="description">Main visualization page</div>
            </div>
            <div class="route-item">
                <a href="/ordinal.html">Œ® Ordinal View</a>
                <div class="description">Ordinal visualization system</div>
            </div>
            <div class="route-item">
                <a href="/dashmerge.html">üìä Dashboard Merge</a>
                <div class="description">Merged dashboard interface</div>
            </div>
            <div class="route-item">
                <a href="/lsystem.html">üå≥ L-System</a>
                <div class="description">L-System visualization</div>
            </div>
            <div class="route-item">
                <a href="/debug">üõ†Ô∏è Debug Tools</a>
                <div class="description">System debugging interface</div>
            </div>
            <div class="route-item">
                <a href="/timer.html">‚è±Ô∏è Timer</a>
                <div class="description">System timer utility</div>
            </div>
        </div>

        <h3>Folder Structure</h3>
        <div class="folder-structure">
            <ul>
                <li class="folder">public/
                    <ul>
                        <li class="folder">components/
                            <ul>
                                <li class="folder">core/
                                    <ul>
                                        <li class="file">DashMerged.js</li>
                                        <li class="file">ThreeScene.js</li>
                                    </ul>
                                </li>
                                <li class="folder">windows/
                                    <ul>
                                        <li class="file">BaseWindow.js</li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li class="folder">lsystems/
                            <ul>
                                <li class="file">dashboard-3d.js</li>
                                <li class="file">dashboard-network.js</li>
                                <li class="file">dashboard-ui.js</li>
                            </ul>
                        </li>
                        <li class="folder">sound/
                            <ul>
                                <li class="file">notification.wav</li>
                                <li class="file">pop.wav</li>
                                <li class="file">blip.wav</li>
                            </ul>
                        </li>
                        <li class="file"><a href="/ordinal.html">ordinal.html</a></li>
                        <li class="file"><a href="/dashmerge.html">dashmerge.html</a></li>
                        <li class="file"><a href="/lsystem.html">lsystem.html</a></li>
                        <li class="file"><a href="/debug">debug_tools.html</a></li>
                        <li class="file"><a href="/timer.html">timer.html</a></li>
                    </ul>
                </li>
            </ul>
        </div>

        <h3>System Info</h3>
        <div class="route-item">
            <a href="/health">üíì Health Check</a>
            <div class="description">System status and metrics</div>
        </div>
    </div>

    <script id="vertexShader" type="x-shader/x-vertex">
        void main() {
            gl_Position = vec4(position, 1.0);
        }
    </script>

    <script id="fragmentShader" type="x-shader/x-fragment">
        uniform float time;
        uniform vec2 resolution;

        float random(vec2 st) {
            return fract(sin(dot(st.xy, vec2(12.9898,78.233))) * 43758.5453123);
        }

        float noise(vec2 st) {
            vec2 i = floor(st);
            vec2 f = fract(st);
            
            float a = random(i);
            float b = random(i + vec2(1.0, 0.0));
            float c = random(i + vec2(0.0, 1.0));
            float d = random(i + vec2(1.0, 1.0));

            vec2 u = f * f * (3.0 - 2.0 * f);

            return mix(a, b, u.x) +
                    (c - a)* u.y * (1.0 - u.x) +
                    (d - b) * u.x * u.y;
        }

        float fbm(vec2 st) {
            float value = 0.0;
            float amplitude = 0.7;  
            float frequency = 0.0;
            
            for (int i = 0; i < 6; i++) {
                value += amplitude * noise(st);
                st *= 2.2;  
                amplitude *= 0.4;  
            }
            return value;
        }

        void main() {
            vec2 st = gl_FragCoord.xy/resolution.xy;
            st.x *= resolution.x/resolution.y;
            
            vec2 q = vec2(0.);
            q.x = fbm(st + 0.3 * time);  
            q.y = fbm(st + vec2(1.0));
            
            vec2 r = vec2(0.);
            r.x = fbm(st + 1.5 * q + vec2(1.7, 9.2) + 0.25 * time);  
            r.y = fbm(st + 1.5 * q + vec2(8.3, 2.8) + 0.35 * time);  

            float f = fbm(st + r);
            
            vec3 baseColor = vec3(0.05, 0.052, 0.074);  
            vec3 accentColor = vec3(0.478431, 0.635294, 0.968627) * 1.2;  

            vec3 color = mix(
                baseColor,
                accentColor,
                pow(f * f * 1.5, 2.0) * 5.0  
            );

            color = mix(
                color,
                baseColor * 0.5,  
                pow(length(q), 1.5)  
            );

            color = mix(
                color,
                vec3(0.7, 0.75, 0.9),  
                pow(length(r.x), 4.0) * 0.3  
            );

            color = pow(color, vec3(1.2));  

            gl_FragColor = vec4(color, 1.0);
        }
    </script>

    <script type="module">
        const psiFonts = [
            // Serif fonts
            'Garamond',
            'Baskerville',
            'Times New Roman',
            'Georgia',
            'Bodoni MT',
            'Palatino',
            'Didot',
            'Cambria',
            'Book Antiqua',
            'Goudy Old Style',
            // Sans-serif fonts
            'Helvetica Neue',
            'Arial',
            'Futura',
            'Avant Garde',
            'Century Gothic',
            'Optima',
            'Franklin Gothic',
            'Univers',
            'Frutiger',
            'Gill Sans'
        ];

        let currentPsiFont = 0;
        const psiHeader = document.querySelector('.psi-header');
        
        function cyclePsiFont() {
            currentPsiFont = (currentPsiFont + 1) % psiFonts.length;
            psiHeader.style.fontFamily = psiFonts[currentPsiFont];
            
            // Add a quick scale animation
            psiHeader.style.transform = 'scale(1.1)';
            setTimeout(() => {
                psiHeader.style.transform = 'scale(1)';
            }, 150);
        }

        psiHeader.addEventListener('click', (e) => {
            e.stopPropagation(); // Prevent particle system click
            cyclePsiFont();
            collapseParticles(collapseLevel); // Still trigger particles
        });

        // Initialize with random font
        currentPsiFont = Math.floor(Math.random() * psiFonts.length);
        psiHeader.style.fontFamily = psiFonts[currentPsiFont];

        import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.157.0/build/three.module.js';

        const shaderCanvas = document.getElementById('shader-canvas');
        const renderer = new THREE.WebGLRenderer({ canvas: shaderCanvas });
        const scene = new THREE.Scene();
        const camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1);

        const geometry = new THREE.PlaneGeometry(2, 2);
        const material = new THREE.ShaderMaterial({
            vertexShader: document.getElementById('vertexShader').textContent,
            fragmentShader: document.getElementById('fragmentShader').textContent,
            uniforms: {
                time: { value: 0 },
                resolution: { value: new THREE.Vector2() }
            }
        });

        const mesh = new THREE.Mesh(geometry, material);
        scene.add(mesh);

        function resizeShaderCanvas() {
            const width = window.innerWidth;
            const height = window.innerHeight;
            renderer.setSize(width, height);
            material.uniforms.resolution.value.set(width, height);
        }

        window.addEventListener('resize', resizeShaderCanvas);
        resizeShaderCanvas();

        function animateShader() {
            requestAnimationFrame(animateShader);
            material.uniforms.time.value += 0.003;  
            renderer.render(scene, camera);
        }
        animateShader();

        const canvas = document.getElementById('particle-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

        let particles = [];
        class Particle {
            constructor(x, y, size) {
                this.x = x;
                this.y = y;
                this.vx = (Math.random() - 0.5) * 1.5;
                this.vy = (Math.random() - 0.5) * 1.5;
                this.size = size;
            }
            update() {
                this.x += this.vx;
                this.y += this.vy;
                this.size *= 0.98;
                if (this.size < 0.5) {
                    this.size = 0;
                }
            }
            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size * 2, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(255, 255, 255, ${this.size / 20})`;
                ctx.fill();
            }
        }

        function collapseParticles(iterations) {
            for (let i = 0; i < iterations * 20; i++) {
                let x = canvas.width / 2 + (Math.random() - 0.5) * 300;
                let y = canvas.height / 2 + (Math.random() - 0.5) * 300;
                let size = Math.random() * 15 + 8;
                particles.push(new Particle(x, y, size));
            }
        }

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            particles.forEach((p, index) => {
                p.update();
                p.draw();
                if (p.size <= 0.5) {
                    particles.splice(index, 1);
                }
            });
            requestAnimationFrame(animate);
        }

        let collapseLevel = 1;
        function collapse() {
            collapseLevel += 1;
            collapseParticles(collapseLevel);
            document.getElementById('poetry').innerText = generatePoetry(collapseLevel);
            document.getElementById('context').innerText = generateContext(collapseLevel);
        }

        function generatePoetry(level) {
            const phrases = [
                "Beyond œâ, a trembling bridge...",
                "The next vast silence folds inward...",
                "From the heights of Œµ‚ÇÄ, echoes descend...",
                "A shimmer in the hierarchy, a breath between infinities...",
                "Collapse and rise, an endless recursion..."
            ];
            return phrases[level % phrases.length];
        }

        function generateContext(level) {
            const descriptions = [
                "An infinite expanse folds upon itself, spiraling into recursive echoes of boundless order.",
                "Each step forward unveils new depths, where the horizon collapses into a shimmering lattice of structure and dissolution.",
                "Infinity contracts, revealing a hidden scaffold‚Äîan unseen architecture beneath perception.",
                "A cascade of realities intertwines, where the finite and the boundless dance in ceaseless motion.",
                "Folding upon folding, the grand hierarchy extends beyond sight, collapsing and emerging anew."
            ];
            return descriptions[level % descriptions.length];
        }

        collapseParticles(collapseLevel);
        animate();
        canvas.addEventListener('click', collapse);

        // Dynamic font animation for title
        const fonts = [
            'Arial Black',
            'Helvetica Neue',
            'Futura',
            'Century Gothic',
            'Optima',
            'Didot',
            'Avenir Next',
            'Montserrat',
            'Raleway',
            'Roboto'
        ];

        const title = document.getElementById('dynamic-title');
        const text = title.textContent;
        title.textContent = '';
        
        // Create spans for each letter
        for (let i = 0; i < text.length; i++) {
            const span = document.createElement('span');
            span.textContent = text[i];
            title.appendChild(span);
        }

        // Animate fonts
        function animateFonts() {
            const spans = title.getElementsByTagName('span');
            for (let i = 0; i < spans.length; i++) {
                const span = spans[i];
                if (Math.random() < 0.03) { // 3% chance to change font each frame
                    const randomFont = fonts[Math.floor(Math.random() * fonts.length)];
                    span.style.fontFamily = randomFont;
                }
            }
            requestAnimationFrame(animateFonts);
        }

        animateFonts();

        // Update server data periodically
        function updateServerData() {
            const spans = document.querySelectorAll('.server-data span');
            spans.forEach(span => {
                if (span.textContent.includes('latency')) {
                    span.textContent = `latency: ${Math.floor(15 + Math.random() * 20)}ms`;
                } else if (span.textContent.includes('throughput')) {
                    span.textContent = `throughput: ${(0.8 + Math.random() * 0.8).toFixed(1)}GB/s`;
                } else if (span.textContent.includes('load')) {
                    span.textContent = `load: ${(0.2 + Math.random() * 0.4).toFixed(2)}`;
                } else if (span.textContent.includes('memory')) {
                    span.textContent = `memory: ${(75 + Math.random() * 20).toFixed(1)}%`;
                } else if (span.textContent.includes('temp')) {
                    span.textContent = `temp: ${(40 + Math.random() * 5).toFixed(1)}¬∞C`;
                }
            });
            setTimeout(updateServerData, 2000);
        }

        updateServerData();

        // Navigation menu toggle
        const navToggle = document.querySelector('.nav-toggle');
        const navMenu = document.querySelector('.nav-menu');
        
        navToggle.addEventListener('click', () => {
            navMenu.classList.toggle('active');
            navToggle.style.opacity = navMenu.classList.contains('active') ? '0' : '1';
        });

        // Close menu when clicking outside
        document.addEventListener('click', (e) => {
            if (!navMenu.contains(e.target) && !navToggle.contains(e.target)) {
                navMenu.classList.remove('active');
                navToggle.style.opacity = '1';
            }
        });
    </script>
</body>
</html>
