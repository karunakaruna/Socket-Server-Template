<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="main.css">
    <!-- <link rel="stylesheet" type="text/css" href="index.css"> -->
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r124/three.min.js"></script>
    <!-- <script type="module" src="submit-module.js"></script> -->
    <script src="submit.js"></script>

    <!-- <script type="module">
        import { submitForm, submitRegisterForm, logOut, submitEmail, updatePassword } from 'submit-module.js';


    </script> -->

    
    <script src="modal.js"></script>
    <script src='./js/util/Userlist-script.js'></script>


        <style>


        </style>

        <script>
            $(document).ready(function() {
                $("#myModal").draggable();
                $("#dragbutton").draggable();

                $(document).mouseup(function(e) {
                    var container = $("#myModal");

                    if (!container.is(e.target) && container.has(e.target).length === 0) {
                        container.hide();
                        $("#minimizeButton").show();
                    }
                });

                $("#minimizeButton").click(function() {
                    $("#myModal").show();
                    $("#myModal").animate({
                        opacity: 1,

                    }, 500);
                    $("#minimizeButton").hide();
                });
            });

        </script>

    </head>
    <body>
        

        
        <button id="minimizeButton" style="display: none;" position="absolute">üëÅ</button>

        <div id="myModal" class="login-modal">
            <div class="modal-content" id="modal-content">
                <!-- Rendered EJS content will be inserted here -->
            </div>
        </div>

        <div id="fullScreenDiv" class="full-screen">
            <!-- Content fetched from the server will be inserted here -->
        </div>
 
        <script>
            // Your fetch code goes here:
            fetch('/modals/home', {
                    credentials: 'include'  // Include credentials with the request
                })
                .then(response => response.text())
                .then(html => {
                    $('#modal-content').html(html);
                    $('#myModal').show();
                })
                .catch(error => console.error('Error:', error));

                fetch('/map', {
                    credentials: 'include'  // Include credentials with the request
                })
                .then(response => response.text())
                .then(html => {
                    $('#fullScreenDiv').html(html);
                })
                .catch(error => console.error('Error:', error));


            $(document).ready(function() {
            console.log('DOM loaded');
            // Function to stop click event propagation
            function stopClickPropagation(event) {
                event.stopPropagation();
            }

            // Add event listeners to each menu div
            var modalDivs = $('.login-modal');
            modalDivs.on('click', stopClickPropagation);
            console.log('stopping click propagation');
        });


        </script>


    </body>    </html>

