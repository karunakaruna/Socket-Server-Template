<!DOCTYPE html>
<html>
<head>
    <title>Zero Knowledge ðŸŽ­</title>
    <style>
        body {
            margin: 0;
            min-height: 100vh;
            background: linear-gradient(135deg, #000, #1a1a2e);
            color: #fff;
            font-family: monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 2rem;
            overflow-x: hidden;
        }

        .zk-container {
            width: 100%;
            max-width: 1200px;
            display: grid;
            gap: 2rem;
            grid-template-columns: 1fr 1fr;
        }

        .proof-generator, .verification {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 2rem;
            backdrop-filter: blur(10px);
        }

        .circuit-canvas {
            width: 100%;
            height: 400px;
            border: 1px solid rgba(147, 51, 234, 0.3);
            border-radius: 10px;
            margin-top: 1rem;
            position: relative;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.3);
        }

        .gate {
            position: absolute;
            width: 60px;
            height: 60px;
            background: rgba(147, 51, 234, 0.2);
            border: 2px solid rgba(147, 51, 234, 0.5);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.2rem;
        }

        .gate:hover {
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(147, 51, 234, 0.5);
        }

        .wire {
            position: absolute;
            height: 2px;
            background: rgba(147, 51, 234, 0.5);
            transform-origin: left center;
            pointer-events: none;
        }

        .proof-steps {
            margin-top: 2rem;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            height: 200px;
            overflow-y: auto;
        }

        .step {
            padding: 0.5rem;
            margin: 0.5rem 0;
            background: rgba(147, 51, 234, 0.1);
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .step.verified {
            border-left: 4px solid rgba(0, 255, 0, 0.5);
        }

        .verification-result {
            margin-top: 2rem;
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .verification-result.success {
            background: rgba(0, 255, 0, 0.1);
            border: 1px solid rgba(0, 255, 0, 0.3);
        }

        .verification-result.failure {
            background: rgba(255, 0, 0, 0.1);
            border: 1px solid rgba(255, 0, 0, 0.3);
        }

        button {
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 8px;
            background: rgba(147, 51, 234, 0.6);
            color: #fff;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: monospace;
            margin: 0.5rem;
        }

        button:hover {
            background: rgba(147, 51, 234, 0.8);
            transform: translateY(-2px);
        }

        .secret-input {
            margin-top: 1rem;
            padding: 0.5rem;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(147, 51, 234, 0.3);
            border-radius: 5px;
            color: #fff;
            font-family: monospace;
        }

        .proof-animation {
            position: absolute;
            width: 20px;
            height: 20px;
            background: rgba(147, 51, 234, 0.8);
            border-radius: 50%;
            pointer-events: none;
            transition: all 0.5s ease;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(2); opacity: 0; }
        }

        .metrics {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-top: 1rem;
        }

        .metric {
            padding: 1rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            text-align: center;
        }

        .metric-value {
            font-size: 1.5rem;
            color: rgba(147, 51, 234, 0.8);
            margin-top: 0.5rem;
        }
    </style>
</head>
<body>
    <h1>ðŸŽ­ Zero Knowledge</h1>
    <div class="zk-container">
        <div class="proof-generator">
            <h2>Circuit Builder</h2>
            <div class="circuit-canvas" id="circuit">
                <!-- Gates and wires will be added dynamically -->
            </div>
            <div class="metrics">
                <div class="metric">
                    <div>Circuit Size</div>
                    <div class="metric-value" id="circuit-size">0 gates</div>
                </div>
                <div class="metric">
                    <div>Constraints</div>
                    <div class="metric-value" id="constraints">0</div>
                </div>
            </div>
            <input type="text" class="secret-input" placeholder="Enter your secret..." id="secret">
            <button onclick="generateProof()">Generate Proof</button>
        </div>
        <div class="verification">
            <h2>Proof Verification</h2>
            <div class="proof-steps">
                <!-- Proof steps will be added here -->
            </div>
            <div class="verification-result" id="result">
                Waiting for proof...
            </div>
            <button onclick="verifyProof()">Verify Proof</button>
        </div>
    </div>

    <script>
        class Gate {
            constructor(type, x, y) {
                this.type = type;
                this.x = x;
                this.y = y;
                this.inputs = [];
                this.element = null;
            }

            createElement() {
                const gate = document.createElement('div');
                gate.className = 'gate';
                gate.style.left = `${this.x}px`;
                gate.style.top = `${this.y}px`;
                gate.textContent = this.type;
                gate.addEventListener('click', () => this.toggleSelect());
                this.element = gate;
                return gate;
            }

            toggleSelect() {
                this.element.style.background = 
                    this.element.style.background === 'rgba(147, 51, 234, 0.8)' ?
                    'rgba(147, 51, 234, 0.2)' : 'rgba(147, 51, 234, 0.8)';
            }
        }

        class Circuit {
            constructor() {
                this.gates = [];
                this.wires = [];
                this.canvas = document.getElementById('circuit');
                this.setupCircuit();
            }

            setupCircuit() {
                // Create a simple circuit
                const gates = [
                    new Gate('IN', 50, 50),
                    new Gate('AND', 150, 100),
                    new Gate('XOR', 250, 150),
                    new Gate('NOT', 350, 100),
                    new Gate('OUT', 450, 150)
                ];

                gates.forEach(gate => {
                    this.gates.push(gate);
                    this.canvas.appendChild(gate.createElement());
                });

                // Connect gates with wires
                this.connectGates(gates[0], gates[1]);
                this.connectGates(gates[1], gates[2]);
                this.connectGates(gates[2], gates[3]);
                this.connectGates(gates[3], gates[4]);
            }

            connectGates(gate1, gate2) {
                const wire = document.createElement('div');
                wire.className = 'wire';
                
                const x1 = parseInt(gate1.element.style.left) + 60;
                const y1 = parseInt(gate1.element.style.top) + 30;
                const x2 = parseInt(gate2.element.style.left);
                const y2 = parseInt(gate2.element.style.top) + 30;
                
                const length = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));
                const angle = Math.atan2(y2 - y1, x2 - x1);
                
                wire.style.width = `${length}px`;
                wire.style.left = `${x1}px`;
                wire.style.top = `${y1}px`;
                wire.style.transform = `rotate(${angle}rad)`;
                
                this.canvas.appendChild(wire);
                this.wires.push(wire);
                gate1.inputs.push(gate2);
            }
        }

        let circuit = new Circuit();
        let proofSteps = [];

        function generateProof() {
            const secret = document.getElementById('secret').value;
            if (!secret) {
                alert('Please enter a secret value');
                return;
            }

            // Clear previous proof steps
            proofSteps = [];
            document.querySelector('.proof-steps').innerHTML = '';

            // Simulate proof generation
            const steps = [
                'Generating commitment to secret...',
                'Computing polynomial evaluations...',
                'Applying homomorphic encryption...',
                'Creating zero-knowledge proof...',
                'Applying Fiat-Shamir transform...'
            ];

            steps.forEach((step, index) => {
                setTimeout(() => {
                    addProofStep(step);
                    // Animate proof generation
                    const proof = document.createElement('div');
                    proof.className = 'proof-animation';
                    proof.style.left = '50px';
                    proof.style.top = '50px';
                    circuit.canvas.appendChild(proof);
                    
                    setTimeout(() => {
                        proof.style.left = '450px';
                        proof.style.top = '150px';
                        setTimeout(() => proof.remove(), 500);
                    }, 100);
                }, index * 1000);
            });

            // Update metrics
            document.getElementById('circuit-size').textContent = `${circuit.gates.length} gates`;
            document.getElementById('constraints').textContent = circuit.gates.length * 2;
        }

        function addProofStep(text) {
            const step = document.createElement('div');
            step.className = 'step';
            step.innerHTML = `
                <span>${text}</span>
                <span>âœ“</span>
            `;
            document.querySelector('.proof-steps').appendChild(step);
            proofSteps.push(step);
        }

        function verifyProof() {
            const result = document.getElementById('result');
            result.className = 'verification-result';
            result.textContent = 'Verifying proof...';

            // Simulate verification
            setTimeout(() => {
                const verified = Math.random() > 0.1; // 90% success rate
                result.className = `verification-result ${verified ? 'success' : 'failure'}`;
                result.textContent = verified ? 
                    'Proof Verified Successfully! âœ“' :
                    'Verification Failed! âœ—';

                // Mark steps as verified
                proofSteps.forEach(step => {
                    if (verified) {
                        step.classList.add('verified');
                    }
                });
            }, 1500);
        }
    </script>
</body>
</html>
